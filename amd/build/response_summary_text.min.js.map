{"version":3,"sources":["../src/response_summary_text.js"],"names":["init","default_answer","obj_response_summary_text","response_summary_init","on","response_summary_blur","response_summary_focus","current_answer","val","response_summary_set_default","response_summary_set_answer","event","data","response_summary_set_editmode","element","css","answer"],"mappings":"4JA0BA,uDAEO,GAAMA,CAAAA,CAAI,CAAG,SAACC,CAAD,CAAoB,CAGpC,GAAIC,CAAAA,CAAyB,CAAG,cAAE,4CAAF,CAAhC,CAGAC,CAAqB,CACjBD,CADiB,CAEjBD,CAFiB,CAArB,CAMAC,CAAyB,CAACE,EAA1B,CACI,MADJ,CAEI,CACIH,cAAc,CAAEA,CADpB,CAEIC,yBAAyB,CAAEA,CAF/B,CAFJ,CAMIG,CANJ,EAUAH,CAAyB,CAACE,EAA1B,CACI,OADJ,CAEI,CACIH,cAAc,CAAEA,CADpB,CAEIC,yBAAyB,CAAEA,CAF/B,CAFJ,CAMII,CANJ,CAQH,CA9BM,C,YAsCDH,CAAAA,CAAqB,CAAG,SAACD,CAAD,CAA4BD,CAA5B,CAA+C,CAEzE,GAAIM,CAAAA,CAAc,CAAGL,CAAyB,CAACM,GAA1B,EAArB,CAKA,GAAsB,EAAlB,EAAAD,CAAc,EAAUA,CAAc,EAAIN,CAA9C,CAA8D,CAC1DQ,CAA4B,CAACP,CAAD,CAA4BD,CAA5B,CAC/B,CAFD,IAEO,CACHS,CAA2B,CAACR,CAAD,CAC9B,CACJ,C,CAOKI,CAAsB,CAAG,SAACK,CAAD,CAAW,CACtC,GAAIJ,CAAAA,CAAc,CAAGI,CAAK,CAACC,IAAN,CAAWV,yBAAX,CAAqCM,GAArC,EAArB,CACA,GAAID,CAAc,EAAII,CAAK,CAACC,IAAN,CAAWX,cAAjC,CAAiD,CAC7CY,CAA6B,CAACF,CAAK,CAACC,IAAN,CAAWV,yBAAZ,CAChC,CACJ,C,CAOKG,CAAqB,CAAG,SAACM,CAAD,CAAW,CACrC,GAAIJ,CAAAA,CAAc,CAAGI,CAAK,CAACC,IAAN,CAAWV,yBAAX,CAAqCM,GAArC,EAArB,CACA,GAAsB,EAAlB,EAAAD,CAAJ,CAA0B,CACtBE,CAA4B,CACxBE,CAAK,CAACC,IAAN,CAAWV,yBADa,CAExBS,CAAK,CAACC,IAAN,CAAWX,cAFa,CAI/B,CACJ,C,CAOKS,CAA2B,CAAG,SAACI,CAAD,CAAa,CAC7CA,CAAO,CAACC,GAAR,CAAY,OAAZ,CAAqB,SAArB,CACH,C,CAQKF,CAA6B,CAAG,SAACC,CAAD,CAAa,CAC/CA,CAAO,CAACC,GAAR,CAAY,OAAZ,CAAqB,SAArB,EAAgCP,GAAhC,CAAoC,EAApC,CACH,C,CAQKC,CAA4B,CAAG,SAACK,CAAD,CAAUE,CAAV,CAAqB,CACtDF,CAAO,CAACC,GAAR,CAAY,OAAZ,CAAqBD,CAAO,CAACC,GAAR,CAAY,kBAAZ,CAArB,EAAsDP,GAAtD,CAA0DQ,CAA1D,CACH,C","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * This script manage the response summary default text.\n *\n * @module     qtype_hybrid/response_summary_text\n * @package    qtype_hybrid\n * @copyright  2021 Knowledge One Inc.\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n * @since      3.9\n */\n/* eslint-disable no-console */\n\nimport $ from 'jquery';\n\nexport const init = (default_answer) => {\n\n    // Cache the response summary textarea.\n    let obj_response_summary_text = $('#page-mod-quiz-attempt .qtype_hybrid_plain');\n\n    // Set the response summary textarea in default mode.\n    response_summary_init(\n        obj_response_summary_text,\n        default_answer\n    );\n\n    // Define the blur action.\n    obj_response_summary_text.on(\n        \"blur\",\n        {\n            default_answer: default_answer,\n            obj_response_summary_text: obj_response_summary_text\n        },\n        response_summary_blur\n    );\n\n    // Define the focus action.\n    obj_response_summary_text.on(\n        \"focus\",\n        {\n            default_answer: default_answer,\n            obj_response_summary_text: obj_response_summary_text\n        },\n        response_summary_focus\n    );\n};\n\n/**\n * Initialize the response summary text area.\n *\n * @param {*} obj_response_summary_text The jQuery textarea object.\n * @param {*} default_answer The default answer.\n */\nconst response_summary_init = (obj_response_summary_text, default_answer) => {\n    // Get the current textarea value.\n    let current_answer = obj_response_summary_text.val();\n\n    // If the textarea is empty (student didn't answer yet or first time on the page) or\n    // the textarea contains the default text (student hit previous button) then\n    // set the textarea in default mode. Otherwise display the answer.\n    if (current_answer == '' || current_answer == default_answer) {\n        response_summary_set_default(obj_response_summary_text, default_answer);\n    } else {\n        response_summary_set_answer(obj_response_summary_text);\n    }\n};\n\n/**\n * If no text is inputed by the student, set the response summary textarea in edit mode.\n *\n * @param {event} event The focus event. Contains the default text and the jQuery response summary obj.\n */\nconst response_summary_focus = (event) => {\n    let current_answer = event.data.obj_response_summary_text.val();\n    if (current_answer == event.data.default_answer) {\n        response_summary_set_editmode(event.data.obj_response_summary_text);\n    }\n};\n\n/**\n * If response summary is empty, set the default text.\n *\n * @param {event} event The focus event. Contains the default text and the jQuery response summary obj.\n */\nconst response_summary_blur = (event) => {\n    let current_answer = event.data.obj_response_summary_text.val();\n    if (current_answer == '') {\n        response_summary_set_default(\n            event.data.obj_response_summary_text,\n            event.data.default_answer\n        );\n    }\n};\n\n/**\n * Restore the original color of the response summary so student can see their answer.\n *\n * @param {jquery} element The jQuery textarea object.\n */\nconst response_summary_set_answer = (element) => {\n    element.css('color', '#495057');\n};\n\n/**\n * Restore the original color of the response summary and remove the default text\n * so student can input their answer.\n *\n * @param {jquery} element The jQuery textarea object.\n */\nconst response_summary_set_editmode = (element) => {\n    element.css('color', '#495057').val('');\n};\n\n/**\n * Set the response summary color to white and add the default text.\n *\n * @param {jquery} element The jQuery textarea object.\n * @param {string} answer The default answer.\n */\nconst response_summary_set_default = (element, answer) => {\n    element.css('color', element.css('background-color')).val(answer);\n};"],"file":"response_summary_text.min.js"}